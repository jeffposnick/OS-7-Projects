/*#Includes*/ #include "QuickDraw3D.h"/*Function Prototypes*/void main(void);void ToolBoxInit(void);void DoQD3D(void);void main(void){	ToolBoxInit();	DoQD3D();		while(!Button())		;}void ToolBoxInit(void){	InitGraf(&qd.thePort);	InitFonts();	InitWindows();	InitMenus();	TEInit();	InitDialogs(0L);	FlushEvents(everyEvent, 0);	InitCursor();	MaxApplZone();}void DoQD3D(void){	WindowPtr				theWindow;	TQ3Status				status;	TQ3ViewStatus			viewStatus;	TQ3DrawContextObject	theDrawContext;	TQ3ViewObject			theView;	TQ3CameraObject			theCamera;	TQ3LightObject			theAmbientLight, theDirectionalLight;	TQ3GroupObject			theLightGroup;	TQ3GroupPosition		theGroupPosition;	TQ3StyleObject			theInterpolation, theBackfacing, theFill;	TQ3ShaderObject			theShader;	TQ3GeometryObject		theBox;	float					color=1.0, colorDelta=.01;	CameraParams			cameraParams;	AmbientLightParams		ambientLightParams;	DirectionalLightParams	directionalLightParams;	StyleParams				styleParams;	BoxParams				boxParams;		theWindow=GetNewCWindow(128, nil, (WindowPtr)-1L);	ShowWindow(theWindow);	SetPort(theWindow);		status=CreateView(theWindow, &theDrawContext, &theView);	if(status==kQ3Failure)		ExitToShell();		SetPoint3D(&(cameraParams.cameraFrom), 4.0, 5.0, 6.0);	SetPoint3D(&(cameraParams.cameraTo), 0.0, 0.0, 0.0);	SetVector3D(&(cameraParams.cameraUp), 0.0, 1.0, 0.0);	SetPoint2D(&(cameraParams.origin), -1.0, 1.0);	cameraParams.hither=0.001;	cameraParams.yon=1000.0;	cameraParams.height=2.0;	cameraParams.width=2.0;	cameraParams.fov=1.0;		status=CreateCamera(cameraParams, theDrawContext, &theCamera);	if(status==kQ3Failure)		ExitToShell();			status=Q3View_SetCamera(theView, theCamera);	if(status==kQ3Failure)		ExitToShell();			SetColorRGB(&(ambientLightParams.color), 0.5, 0.5, 0.5);	ambientLightParams.brightness=0.7;		status=CreateAmbientLight(ambientLightParams, &theAmbientLight);	if(status==kQ3Failure)		ExitToShell();			SetColorRGB(&(directionalLightParams.color), 0.8, 0.3, 1.0);	directionalLightParams.castsShadows=kQ3True;	SetVector3D(&(directionalLightParams.direction), -0.9, -1.3, 0.6);	directionalLightParams.brightness=2.0;		status=CreateDirectionalLight(directionalLightParams, &theDirectionalLight);	if(status==kQ3Failure)		ExitToShell();			theLightGroup=Q3LightGroup_New();	if(theLightGroup==nil)		ExitToShell();			theGroupPosition=Q3Group_AddObject(theLightGroup, theAmbientLight);	if(theGroupPosition==0)		ExitToShell();			theGroupPosition=Q3Group_AddObject(theLightGroup, theDirectionalLight);	if(theGroupPosition==0)		ExitToShell();			status=Q3View_SetLightGroup(theView, theLightGroup);	if(status==kQ3Failure)		ExitToShell();			Q3Object_Dispose(theAmbientLight);	Q3Object_Dispose(theDirectionalLight);			styleParams.interpolationStyle=kQ3InterpolationStyleVertex;	styleParams.backfacingStyle=kQ3BackfacingStyleRemove;	styleParams.fillStyle=kQ3FillStyleFilled;	styleParams.shaderType=kQ3IlluminationTypePhong;		status=CreateStyles(styleParams, &theInterpolation, &theBackfacing, &theFill, &theShader);	if(status==kQ3Failure)		ExitToShell();			SetColorRGB(&(boxParams.color), color, color, color);	SetPoint3D(&(boxParams.origin), 0.0, 0.0, 0.0);	SetVector3D(&(boxParams.orientation), 0.0, color, 0.0);	SetVector3D(&(boxParams.majorAxis), 0.0, 0.0, color);	SetVector3D(&(boxParams.minorAxis), color, 0.0, 0.0);	boxParams.ambient=0.8;		status=CreateBox(boxParams, &theBox);	if(status==kQ3Failure)		ExitToShell();			do	{		Q3View_StartRendering(theView);		do		{			status=Q3Style_Submit(theInterpolation, theView);			if(status==kQ3Failure)				ExitToShell();						status=Q3Style_Submit(theBackfacing, theView);			if(status==kQ3Failure)				ExitToShell();						status=Q3Style_Submit(theFill, theView);			if(status==kQ3Failure)				ExitToShell();						status=Q3Shader_Submit(theShader, theView);			if(status==kQ3Failure)				ExitToShell();						status=Q3Geometry_Submit(theBox, theView);			if(status==kQ3Failure)				ExitToShell();					viewStatus=Q3View_EndRendering(theView);				}		while(viewStatus==kQ3ViewStatusRetraverse);				color-=colorDelta;		if(color>=1.0||color<=0.0)			colorDelta=-colorDelta;		SetColorRGB(&(boxParams.color), color, color, color);		SetVector3D(&(boxParams.orientation), 0.0, ((color*2.0)+1.0), 0.0);		SetVector3D(&(boxParams.majorAxis), 0.0, 0.0, ((color*2.0)+1.0));		SetVector3D(&(boxParams.minorAxis), ((color*2.0)+1.0), 0.0, 0.0);		status=CreateBox(boxParams, &theBox);		if(status==kQ3Failure)			ExitToShell();			}	while(!Button());}